<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeetCode Collector</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            width: 350px;
            height: auto;
            background-color: #F9FAFB; /* bg-gray-50 */
            color: #1F2937; /* text-gray-800 */
            margin: 0;
        }
        #app-container {
            padding: 24px; /* p-6 */
        }
        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 24px; /* mb-6 */
        }
        .header svg {
            width: 32px; /* w-8 */
            height: 32px; /* h-8 */
            color: #F59E0B; /* text-yellow-500 */
            margin-right: 12px; /* mr-3 */
        }
        .header h1 {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 700; /* font-bold */
            color: #111827; /* text-gray-900 */
        }
        #logged-out-view p {
            text-align: center;
            color: #4B5563; /* text-gray-600 */
            margin-bottom: 24px; /* mb-6 */
        }
        .btn {
            width: 100%;
            color: white;
            font-weight: 600; /* font-semibold */
            padding: 12px 16px; /* py-3 px-4 */
            border: none;
            border-radius: 8px; /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); /* shadow-md */
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btn:hover {
            transform: scale(1.02);
        }
        .btn-google {
            background-color: #2563EB; /* bg-blue-600 */
        }
        .btn-google:hover {
            background-color: #1D4ED8; /* hover:bg-blue-700 */
        }
        .btn-google svg {
            width: 20px; /* w-5 */
            height: 20px; /* h-5 */
            margin-right: 8px; /* mr-2 */
        }
        .btn-signout {
            background-color: #EF4444; /* bg-red-500 */
            margin-top: 24px; /* mt-6 */
        }
        .btn-signout:hover {
            background-color: #DC2626; /* hover:bg-red-600 */
        }
        .user-card {
            display: flex;
            align-items: center;
            background-color: white;
            padding: 16px; /* p-4 */
            border-radius: 8px; /* rounded-lg */
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1); /* shadow */
        }
        .user-card img {
            width: 48px; /* w-12 */
            height: 48px; /* h-12 */
            border-radius: 9999px; /* rounded-full */
            margin-right: 16px; /* mr-4 */
        }
        .user-card #user-name {
            font-weight: 600; /* font-semibold */
            font-size: 1.125rem; /* text-lg */
        }
        .user-card #user-email {
            font-size: 0.875rem; /* text-sm */
            color: #6B7280; /* text-gray-500 */
        }
        .hidden {
            display: none;
        }

        /* --- New Loader Styles --- */
        #loader {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80px; /* Give it some space */
        }
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #E5E7EB; /* A light gray track */
            border-top-color: #2563EB; /* The main blue color */
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
        /* --- End New Loader Styles --- */
        #status {
            margin-top: 10px;
            font-size: 14px;
            color: #555;
        }
        #status.loading {
            color: #007bff; /* blue for loading */
        }
        #status.success {
            color: #28a745; /* green for success */
        }
        #status.error {
            color: #dc3545; /* red for error */
        }
    </style>
</head>
<body>

    <div id="app-container">
        <div class="header">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5" />
            </svg>
            <h1>LeetRecall</h1>
        </div>

        <div id="loader">
            <div class="spinner"></div>
        </div>

        <!-- Logged Out View -->
        <div id="logged-out-view" class="hidden">
            <p>Sign in to save and review your solved LeetCode problems.</p>
            <button id="sign-in-btn" class="btn btn-google">
                <svg viewBox="0 0 48 48" width="48px" height="48px"><path fill="#fbc02d" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12	s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20	s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"></path><path fill="#e53935" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039	l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"></path><path fill="#4caf50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36	c-5.222,0-9.651-3.356-11.303-8H6.306C9.656,39.663,16.318,44,24,44z"></path><path fill="#1565c0" d="M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.089,5.571	l6.19,5.238C42.022,35.253,44,30.028,44,24C44,22.659,43.862,21.35,43.611,20.083z"></path></svg>
                Sign in with Google
            </button>
        </div>

        <!-- Logged In View -->
        <div id="logged-in-view" class="hidden">
             <div class="user-card">
                <img id="user-photo" alt="User profile photo">
                <div>
                    <p id="user-name"></p>
                    <p id="user-email"></p>
                </div>
            </div>
            <button id="save-btn" class="btn btn-google" style="margin-top: 24px;">
                Save Current Problem
            </button>
            <div id="status"></div>
            <button id="sign-out-btn" class="btn btn-signout">
                Sign Out
            </button>
        </div>
    </div>

    <script src="popup.js" type="module"></script>
</body>
</html>